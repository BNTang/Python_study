# Python 字典定义的注意事项

在 Python 中，字典（Dictionary）是一种非常实用的数据结构，它以键值对的形式存储数据。在使用字典时，有一些重要的注意事项需要我们了解。本文将详细介绍这些注意事项，帮助大家更好地使用字典。

## 1. 键（key）不能重复

在字典中，键必须是唯一的。如果定义了重复的键，后面的值会覆盖前面的值。让我们通过一个例子来理解：

```python
d = {"name": "neo", "name": "neo2"}
print(d)  # 输出: {'name': 'neo2'}
```

在这个例子中，虽然我们定义了两个相同的键 "name"，但最终字典中只会保留最后一个值 "neo2"。这是因为字典的键必须是唯一的，重复的键会导致前面的值被覆盖。

## 2. 键必须是不可变类型

字典的键必须是不可变类型（immutable），这意味着我们不能使用列表、字典等可变类型作为键。让我们看一个错误的例子：

```python
# 错误示例
d = {[1, 2]: "neo"}  # 这行代码会报错
# TypeError: unhashable type: 'list'
```

这个错误发生的原因是列表是可变的，而字典的键必须是不可变的。我们可以使用以下类型作为字典的键：
- 数字（整数、浮点数）
- 字符串
- 元组（如果元组中的元素都是不可变的）
- 布尔值

## 3. 可变类型与不可变类型的区别

为了更好地理解为什么字典的键必须是不可变的，让我们来看看可变类型和不可变类型的区别：

### 不可变类型示例（数字）：
```python
num = 10
print(id(num))  # 输出: 1407263040
num = 20
print(id(num))  # 输出: 1407263072
```
当我们修改不可变类型的值时，实际上是创建了一个新的对象，原来的对象并没有改变。

### 可变类型示例（列表）：
```python
num = [1, 2, 3]
print(id(num))  # 输出: 1407263040
num.append(4)
print(id(num))  # 输出: 1407263040
```
当我们修改可变类型的值时，对象本身被修改，但对象的 ID 保持不变。

## 总结

1. 字典的键必须是唯一的，重复的键会导致值被覆盖
2. 字典的键必须是不可变类型，不能使用列表、字典等可变类型
3. 理解可变类型和不可变类型的区别对于正确使用字典非常重要

掌握这些注意事项，可以帮助我们避免在使用字典时遇到常见错误，写出更加健壮的 Python 代码。

---

> 作者：程序员NEO
> 微信公众号：Python 编程学习
> 原文链接：https://github.com/BNTang